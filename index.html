<!DOCTYPE html>
<html lang="en">
<head>
    <!-- 禁用浏览器缓存 -->
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <!-- 禁用浏览器缓存 - 单次设置足够 -->
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Building Game Score System</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<body>
    <div id="login-container">
        <div class="login-box">
            <h2>Please Enter Password</h2>
            <input type="password" id="password-input" placeholder="Enter password">
            <button id="login-button">Login</button>
            <p id="login-error" class="error-message"></p>
        </div>
    </div>

    <div id="main-container" class="hidden">
        <nav class="navbar">
            <div class="nav-brand">Team Building Game Score System</div>
            <ul class="nav-menu">
                <li class="nav-item active" data-section="newgame-section">NewGameInput</li>
                <li class="nav-item" data-section="leaderboard-section">LeaderBoard</li>
                <li class="nav-item" data-section="history-section">History Record</li>
            </ul>
        </nav>

        <main>
            <section id="newgame-section" class="section active">
                <h2>New Game Record</h2>
                <div class="input-container">
                    <div class="form-group">
                        <label for="game-date">Date</label>
                        <input type="date" id="game-date" required>
                    </div>
                    <div class="form-group">
                        <label for="service-fee">ServiceFee</label>
                        <input type="number" id="service-fee" step="0.01" min="0" required>
                    </div>
                </div>
                
                <!-- Add Player Input -->
                <div class="add-player-container">
                    <div class="form-group">
                        <label for="new-player-name">Add New Player</label>
                        <div class="add-player-input">
                            <input type="text" id="new-player-name" placeholder="Enter player name">
                            <button id="add-player-btn" class="primary-button">Add Player</button>
                        </div>
                    </div>
                </div>
                
                <h3>Participating Players</h3>
                <div id="player-list" class="player-list">
                    <!-- Player list will be dynamically generated via JavaScript -->
                </div>

                <div class="button-container">
                    <button id="validate-button" class="primary-button">Validate Data</button>
                </div>

                <div id="validation-result" class="validation-result hidden">
                    <h3>Validation Result</h3>
                    <p id="validation-message"></p>
                    <div id="game-summary" class="game-summary hidden">
                        <h3>Game Summary</h3>
                        <table id="summary-table">
                            <thead>
                                <tr>
                                    <th>Player</th>
                                    <th>Attended</th>
                                    <th>Win/Lose</th>
                                    <th>Chips</th>
                                    <th>Service Fee</th>
                                    <th>Final Chips</th>
                                </tr>
                            </thead>
                            <tbody id="summary-table-body">
                                <!-- Summary data will be dynamically generated -->
                            </tbody>
                        </table>
                        <div class="button-container">
                            <button id="update-leaderboard-button" class="primary-button">Update LeaderBoard</button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="leaderboard-section" class="section">
                <div class="leaderboard-container">
                    <div class="leaderboard-header">
                        <h2>Leaderboard</h2>
                        <div class="latest-update">Last Update: <span id="latest-update-time">-</span></div>
                    </div>
                    <div class="table-container">
                        <table id="leaderboard-table">
                            <thead>
                                <tr>
                                    <th>Ranking</th>
                                    <th>Player</th>
                                    <th>WinRate</th>
                                    <th>Scores</th>
                                    <th>Attend</th>
                                    <th>Win</th>
                                    <th>Lose</th>
                                    <th>Peace</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboard-table-body">
                                <!-- Leaderboard data will be dynamically generated -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="button-container save-button-container">
                    <button id="saveLeaderboardBtn" class="save-button">Save as Image</button>
                </div>
            </section>

            <section id="history-section" class="section">
                <h2>History Records</h2>
                <div class="input-container">
                    <div class="form-group">
                        <label for="history-date">Select Date</label>
                        <input type="date" id="history-date">
                    </div>
                    <div class="form-group">
                        <button id="search-history-btn" class="primary-button">Search</button>
                    </div>
                </div>
                <div id="history-result" class="history-result hidden">
                    <h3>Game Records on <span id="selected-date"></span></h3>
                    <div class="table-container">
                        <table id="history-table">
                            <thead>
                                <tr>
                                    <th>Player</th>
                                    <th>Win/Lose</th>
                                    <th>Chips</th>
                                    <th>Service Fee</th>
                                    <th>Final Chips</th>
                                </tr>
                            </thead>
                            <tbody id="history-table-body">
                                <!-- History data will be dynamically generated -->
                            </tbody>
                        </table>
                    </div>
                    <div id="no-records-message" class="hidden">
                        No records found for the selected date.
                    </div>
                    <div id="save-history-btn-container" class="hidden">
                        <button id="saveHistoryBtn" class="save-button">Save as Image</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html> 
